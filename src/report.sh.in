#!/bin/bash

PYTHON3="@PYTHON3@"
prefix="@prefix@"
pkgdatadir="@datarootdir@/@PACKAGE@"

usage="Usage: $0 fsnview_output_directory\n"

get_abspath() {
  "$PYTHON3" -c 'import os,sys; print(os.path.abspath(os.path.expanduser(sys.argv[1])))' "$1"
}

outdir="$1"

if [ ! -d "$outdir" ]; then
  echo "Error: report.sh: Directory requested for analysis is not a directory: '$outdir'." >&2
  exit 1
fi

pushd "$outdir" >/dev/null

"$PYTHON3" "${pkgdatadir}/python3/report.py" --debug "$outdir" >report.html

#TODO Whittle this Bash report, importing into Python version
# Output file summary
echo ""
echo "Results"
echo "======="
echo ""
echo ""
echo "Review these files for between-tool differences:"
echo ""
ls diffs*.txt
echo ""
echo ""
echo "Review these files for file system timelines according to each tool:"
echo ""
ls mactimeline*.txt
echo ""
echo ""

popd >/dev/null
